!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("d3-selection")):"function"==typeof define&&define.amd?define(["d3-selection"],t):t(e.d3)}(this,function(e){"use strict";function t(e){var t=null,n=e.getAttribute("id");if(n){var i=Object.values(e.ownerDocument.querySelectorAll('*[id]:not([id=""])')).map(function(e){return e.getAttribute("id")}),o=parseInt(n.replace(/.+(\d+?)$/,"$1"))||0;for(n=n.replace(/\d+$/,"");null===t||-1!==i.indexOf(t);)t=n+ ++o;e.setAttribute("id",t)}return e}function n(e){var n,i=e.node(),o=((n=i.cloneNode(!0)).querySelectorAll('*[id]:not([id=""])').forEach(t),t(n));return this.ownerDocument.importNode(o,!0)}function i(){return null}e.selection.prototype.appendClone=function(e){return this.select(function(){return e="function"==typeof e?e.apply(this,arguments):e,this.appendChild(n.call(this,e))})},e.selection.prototype.insertClone=function(t,o){return this.select(function(){return t="function"==typeof t?t.apply(this,arguments):t,o=null==o?i:"function"==typeof o?o:e.selector(o),this.insertBefore(n.call(this,t),o.apply(this,arguments)||null)})}});