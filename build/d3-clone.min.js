!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("d3-selection")):"function"==typeof define&&define.amd?define(["d3-selection"],t):t(e.d3)}(this,function(n){"use strict";function o(e){var t=null,n=e.getAttribute("id");if(n){var i=Object.values(e.ownerDocument.querySelectorAll('*[id]:not([id=""])')).map(function(e){return e.getAttribute("id")}),o=parseInt(n.replace(/.+(\d+?)$/,"$1"))||0;for(n=n.replace(/\d+$/,"");null===t||-1!==i.indexOf(t);)t=n+ ++o;e.setAttribute("id",t)}return e}function i(e){var t,n=e.node(),i=((t=n.cloneNode(!0)).querySelectorAll('*[id]:not([id=""])').forEach(o),o(t));return this.ownerDocument.importNode(i,!0)}function r(){return null}n.selection.prototype.appendClone=function(e){return this.select(function(){return e="function"==typeof e?e.apply(this,arguments):e,this.appendChild(i.call(this,e))})},n.selection.prototype.insertClone=function(e,t){return this.select(function(){return e="function"==typeof e?e.apply(this,arguments):e,t=null==t?r:"function"==typeof t?t:n.selector(t),this.insertBefore(i.call(this,e),t.apply(this,arguments)||null)})}});